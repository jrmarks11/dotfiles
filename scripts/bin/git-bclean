#!/bin/sh

for branch in $(git for-each-ref --format='%(refname)' refs/heads/); do
  name="${branch##*/}"
  echo "Checking $name"

  # dont delete master pls thx
  if [[ $name == *"master"* ]]; then
    continue
  fi

  merged="$(git log --grep=$name | grep 'Merge pull request')"
  if [[ -n $merged ]]; then
    echo "$name deleted"
  fi
done
